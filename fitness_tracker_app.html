<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthy Transformation Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #8b5cf6;
            --secondary: #f97316;
            --dark: #1e1b4b;
            --light: #f8fafc;
            --gray: #64748b;
            --success: #10b981;
            --danger: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, #312e81 100%);
            color: var(--light);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--secondary);
            margin: 5px 0;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .nav-tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: 2px solid var(--primary);
            border-radius: 25px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
            font-weight: 600;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-color: var(--secondary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .card h2 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .day-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .day-btn {
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 2px solid var(--primary);
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .day-btn:hover, .day-btn.active {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .activity-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(139, 92, 246, 0.1);
            border-left: 4px solid var(--primary);
            border-radius: 8px;
        }

        .activity-section h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 8px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }

        .expand-btn {
            margin-left: auto;
            padding: 5px 15px;
            background: var(--primary);
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
        }

        .expand-btn:hover {
            background: var(--secondary);
        }

        .expandable-content {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
        }

        .expandable-content.show {
            display: block;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--secondary);
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            font-size: 1em;
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            border: 2px solid var(--primary);
        }

        .meal-grid, .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .meal-card, .exercise-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .meal-card:hover, .exercise-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .meal-card h3, .exercise-card h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .meal-stats, .exercise-stats {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .stat-badge {
            padding: 5px 12px;
            background: var(--primary);
            border-radius: 15px;
            font-size: 0.85em;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark);
            border-top: 2px solid var(--primary);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-item:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .nav-item.active {
            color: var(--secondary);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .nav-tabs {
                flex-wrap: nowrap;
                justify-content: flex-start;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--dark);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid var(--primary);
        }

        .close-modal {
            float: right;
            font-size: 2em;
            cursor: pointer;
            color: var(--secondary);
        }

        .video-link {
            display: inline-block;
            margin: 10px 0;
            padding: 10px 20px;
            background: #ff0000;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
        }

        .video-link:hover {
            background: #cc0000;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>💪 Healthy Transformation</h1>
            <p>Oct 23, 2025 → Apr 8, 2026 (24 Weeks)</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Current</div>
                    <div class="stat-value" id="currentWeight">177</div>
                    <div class="stat-label">lbs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Goal</div>
                    <div class="stat-value">159</div>
                    <div class="stat-label">lbs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">To Lose</div>
                    <div class="stat-value" id="tolose">18</div>
                    <div class="stat-label">lbs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Week</div>
                    <div class="stat-value" id="currentWeek">1</div>
                    <div class="stat-label">of 24</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="overallProgress" style="width: 0%">0%</div>
            </div>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showTab('dashboard')">📊 Dashboard</div>
            <div class="nav-tab" onclick="showTab('daily')">📅 Daily Plan</div>
            <div class="nav-tab" onclick="showTab('exercises')">💪 Exercises</div>
            <div class="nav-tab" onclick="showTab('meals')">🍽️ Meals</div>
            <div class="nav-tab" onclick="showTab('progress')">📈 Progress</div>
            <div class="nav-tab" onclick="showTab('running')">🏃 Running</div>
        </div>

        <!-- DASHBOARD TAB -->
        <div id="dashboard" class="tab-content active">
            <div class="card">
                <h2>🎯 This Week's Goals</h2>
                <div class="checkbox-item">
                    <input type="checkbox" id="goal1">
                    <label>Complete 6-7 morning sessions</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="goal2">
                    <label>Hit protein target daily (110-120g)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="goal3">
                    <label>Drink 2.5-3L water daily</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="goal4">
                    <label>Lose 1-2 lbs this week</label>
                </div>
            </div>

            <div class="card">
                <h2>📊 Today's Quick Log</h2>
                <div class="input-group">
                    <label>Date</label>
                    <input type="date" id="quickDate">
                </div>
                <div class="input-group">
                    <label>Weight (lbs) - Thursdays only</label>
                    <input type="number" id="quickWeight" step="0.1">
                </div>
                <div class="input-group">
                    <label>Calories Eaten</label>
                    <input type="number" id="quickCalIn">
                </div>
                <div class="input-group">
                    <label>Calories Burned (Exercise)</label>
                    <input type="number" id="quickCalOut">
                </div>
                <div class="input-group">
                    <label>Protein (g)</label>
                    <input type="number" id="quickProtein">
                </div>
                <div class="input-group">
                    <label>Water (glasses)</label>
                    <input type="number" id="quickWater" min="0" max="12">
                </div>
                <div class="input-group">
                    <label>Back Pain (0-10)</label>
                    <input type="number" id="quickPain" min="0" max="10">
                </div>
                <button class="btn" onclick="saveQuickLog()">💾 Save Today's Log</button>
            </div>

            <div class="card">
                <h2>🔥 Calorie Deficit Calculator</h2>
                <p>Deficit needed per week for 1-2 lbs loss: <strong>3,500-7,000 calories</strong></p>
                <p>Daily target deficit: <strong>500-1,000 calories</strong></p>
            </div>
        </div>

        <!-- DAILY PLAN TAB -->
        <div id="daily" class="tab-content">
            <div class="card">
                <h2>📅 Select Day</h2>
                <div class="day-selector">
                    <div class="day-btn active" onclick="selectDay('thursday')">
                        <div>Thursday</div>
                        <div style="font-size: 0.8em; opacity: 0.8;">Weigh-In</div>
                    </div>
                    <div class="day-btn" onclick="selectDay('friday')">Friday</div>
                    <div class="day-btn" onclick="selectDay('saturday')">Saturday</div>
                    <div class="day-btn" onclick="selectDay('sunday')">Sunday</div>
                    <div class="day-btn" onclick="selectDay('monday')">Monday</div>
                    <div class="day-btn" onclick="selectDay('tuesday')">Tuesday</div>
                    <div class="day-btn" onclick="selectDay('wednesday')">Wednesday</div>
                </div>
            </div>

            <div id="dayContent">
                <!-- Day content will be inserted here -->
            </div>
        </div>

        <!-- EXERCISES TAB -->
        <div id="exercises" class="tab-content">
            <div class="card">
                <h2>💪 Exercise Library</h2>
                <div class="input-group">
                    <label>Filter by Type</label>
                    <select id="exerciseFilter" onchange="filterExercises()">
                        <option value="all">All Exercises</option>
                        <option value="core">Core</option>
                        <option value="upper">Upper Body</option>
                        <option value="lower">Lower Body</option>
                        <option value="cardio">Cardio</option>
                    </select>
                </div>
                <div class="exercise-grid" id="exerciseGrid">
                    <!-- Exercises will be populated here -->
                </div>
            </div>
        </div>

        <!-- MEALS TAB -->
        <div id="meals" class="tab-content">
            <div class="card">
                <h2>🍽️ Meal Library</h2>
                <div class="input-group">
                    <label>Filter by Meal Type</label>
                    <select id="mealFilter" onchange="filterMeals()">
                        <option value="all">All Meals</option>
                        <option value="breakfast">Breakfast</option>
                        <option value="lunch">Lunch</option>
                        <option value="dinner">Dinner</option>
                        <option value="snack">Snack</option>
                    </select>
                </div>
                <div class="meal-grid" id="mealGrid">
                    <!-- Meals will be populated here -->
                </div>
            </div>
        </div>

        <!-- PROGRESS TAB -->
        <div id="progress" class="tab-content">
            <div class="card">
                <h2>📈 Weight Progress</h2>
                <div id="weightChart">
                    <!-- Simple weight tracking -->
                    <div class="input-group">
                        <label>Add Weight Entry</label>
                        <input type="date" id="weightDate">
                        <input type="number" id="weightValue" placeholder="Weight in lbs" step="0.1">
                        <button class="btn" onclick="addWeightEntry()">Add Entry</button>
                    </div>
                    <div id="weightHistory"></div>
                </div>
            </div>

            <div class="card">
                <h2>📏 Measurements</h2>
                <div class="input-group">
                    <label>Date</label>
                    <input type="date" id="measureDate">
                </div>
                <div class="input-group">
                    <label>Waist (inches)</label>
                    <input type="number" id="measureWaist" step="0.1">
                </div>
                <div class="input-group">
                    <label>Chest (inches)</label>
                    <input type="number" id="measureChest" step="0.1">
                </div>
                <div class="input-group">
                    <label>Arms (inches)</label>
                    <input type="number" id="measureArms" step="0.1">
                </div>
                <button class="btn" onclick="saveMeasurement()">💾 Save Measurement</button>
                <div id="measurementHistory"></div>
            </div>

            <div class="card">
                <h2>🏆 Non-Scale Victories</h2>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>Clothes fit better</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>Received compliments</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>More energy</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>Better sleep</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>Stairs easier</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>Back pain reduced</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox">
                    <label>Stronger in exercises</label>
                </div>
            </div>

            <div class="card">
                <h2>💾 Backup & Export</h2>
                <button class="btn" onclick="exportData()">📥 Download Backup</button>
                <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()">📤 Import Backup</button>
                <input type="file" id="importFile" style="display:none" onchange="importData(event)" accept=".json">
            </div>
        </div>

        <!-- RUNNING TAB -->
        <div id="running" class="tab-content">
            <div class="card">
                <h2>🏃 Running Log</h2>
                <div class="input-group">
                    <label>Date</label>
                    <input type="date" id="runDate">
                </div>
                <div class="input-group">
                    <label>Distance (km)</label>
                    <input type="number" id="runDistance" step="0.1">
                </div>
                <div class="input-group">
                    <label>Time (minutes)</label>
                    <input type="number" id="runTime" step="0.1">
                </div>
                <div class="input-group">
                    <label>Pace (min/km) - Auto-calculated</label>
                    <input type="text" id="runPace" readonly>
                </div>
                <div class="input-group">
                    <label>Calories Burned</label>
                    <input type="number" id="runCalories">
                </div>
                <div class="input-group">
                    <label>How It Felt</label>
                    <select id="runFeeling">
                        <option>Easy</option>
                        <option>Moderate</option>
                        <option>Hard</option>
                        <option>Very Hard</option>
                    </select>
                </div>
                <button class="btn" onclick="saveRun()">💾 Save Run</button>
                <div id="runHistory"></div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="showTab('dashboard')">
            <div style="font-size: 1.5em;">📊</div>
            <div style="font-size: 0.8em;">Home</div>
        </div>
        <div class="nav-item" onclick="showTab('daily')">
            <div style="font-size: 1.5em;">📅</div>
            <div style="font-size: 0.8em;">Plan</div>
        </div>
        <div class="nav-item" onclick="showTab('exercises')">
            <div style="font-size: 1.5em;">💪</div>
            <div style="font-size: 0.8em;">Exercises</div>
        </div>
        <div class="nav-item" onclick="showTab('meals')">
            <div style="font-size: 1.5em;">🍽️</div>
            <div style="font-size: 0.8em;">Meals</div>
        </div>
        <div class="nav-item" onclick="showTab('progress')">
            <div style="font-size: 1.5em;">📈</div>
            <div style="font-size: 0.8em;">Progress</div>
        </div>
    </div>

    <!-- Modal for Exercise/Meal Details -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // Initialize with today's date
        document.getElementById('quickDate').valueAsDate = new Date();
        document.getElementById('runDate').valueAsDate = new Date();
        document.getElementById('weightDate').valueAsDate = new Date();
        document.getElementById('measureDate').valueAsDate = new Date();

        // Calculate run pace
        document.getElementById('runDistance').addEventListener('input', calculatePace);
        document.getElementById('runTime').addEventListener('input', calculatePace);

        function calculatePace() {
            const distance = parseFloat(document.getElementById('runDistance').value);
            const time = parseFloat(document.getElementById('runTime').value);
            if (distance > 0 && time > 0) {
                const pace = (time / distance).toFixed(2);
                document.getElementById('runPace').value = pace + ' min/km';
            }
        }

        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.closest('.nav-tab')?.classList.add('active');
            event.target.closest('.nav-item')?.classList.add('active');
        }

        // Modal functions
        function closeModal() {
            document.getElementById('detailModal').classList.remove('show');
        }

        function showExerciseDetail(exercise) {
            const modal = document.getElementById('detailModal');
            const body = document.getElementById('modalBody');
            
            body.innerHTML = `
                <h2>${exercise.name}</h2>
                <div class="stat-badge">${exercise.type}</div>
                <div class="stat-badge">${exercise.difficulty}</div>
                <div class="stat-badge">~${exercise.calsPerSet} cal/set</div>
                
                <h3 style="margin-top: 20px;">📋 Instructions</h3>
                <p>${exercise.instructions}</p>
                
                <h3 style="margin-top: 20px;">⚠️ Key Points</h3>
                <p>${exercise.keyPoints}</p>
                
                ${exercise.alternatives ? `
                    <h3 style="margin-top: 20px;">🔄 Alternatives</h3>
                    <p>${exercise.alternatives}</p>
                ` : ''}
                
                ${exercise.videoUrl ? `
                    <a href="${exercise.videoUrl}" target="_blank" class="video-link">
                        🎥 Watch Video Tutorial
                    </a>
                ` : ''}
            `;
            
            modal.classList.add('show');
        }

        function showMealDetail(meal) {
            const modal = document.getElementById('detailModal');
            const body = document.getElementById('modalBody');
            
            body.innerHTML = `
                <h2>${meal.name}</h2>
                <div class="meal-stats">
                    <div class="stat-badge">🍖 ${meal.protein}g protein</div>
                    <div class="stat-badge">🔥 ${meal.calories} cal</div>
                    <div class="stat-badge">⏱️ ${meal.prepTime} mins</div>
                </div>
                
                <h3 style="margin-top: 20px;">🛒 Ingredients</h3>
                <p style="white-space: pre-line;">${meal.ingredients}</p>
                
                <h3 style="margin-top: 20px;">👨‍🍳 Instructions</h3>
                <p style="white-space: pre-line;">${meal.instructions}</p>
            `;
            
            modal.classList.add('show');
        }

        // Exercise Library Data
        const exercises = [
            {
                name: "Modified Glute Bridges",
                type: "Core",
                difficulty: "Beginner",
                calsPerSet: 8,
                instructions: "1. Lie on back, knees bent, feet flat hip-width apart\n2. Arms by sides, palms down\n3. Press through heels, lift hips until body forms straight line\n4. Squeeze glutes hard at top, hold 2 seconds\n5. Lower slowly back down",
                keyPoints: "Don't arch back excessively. Focus on squeezing glutes, not pushing with lower back. If uncomfortable, start with quarter-height lifts.",
                alternatives: "Step-ups on jump box, Reverse lunges, Clamshells with resistance band",
                videoUrl: "https://www.youtube.com/results?search_query=glute+bridge+proper+form"
            },
            {
                name: "Dead Bugs",
                type: "Core",
                difficulty: "Beginner",
                calsPerSet: 6,
                instructions: "1. Lie on back, arms extended toward ceiling\n2. Lift legs so knees at 90 degrees\n3. Slowly extend right arm overhead while straightening left leg\n4. Hover arm and leg just above floor\n5. Return to start, repeat other side",
                keyPoints: "Keep lower back pressed against floor throughout. Move SLOWLY. If too hard, just extend arm OR leg, not both together.",
                alternatives: "Modified version with only arm OR leg movement",
                videoUrl: "https://www.youtube.com/results?search_query=dead+bug+exercise+proper+form"
            },
            {
                name: "Plank Hold",
                type: "Core",
                difficulty: "Beginner",
                calsPerSet: 5,
                instructions: "1. Start on forearms and toes (or knees if needed)\n2. Elbows directly under shoulders\n3. Body in straight line from head to heels\n4. Engage core, squeeze glutes, don't let hips sag\n5. Breathe normally, hold position",
                keyPoints: "Quality over duration. Stop if hips sag or back arches. Better to do 20 seconds perfect than 40 seconds with bad form. Start on knees if needed.",
                alternatives: "Knee plank, Wall plank",
                videoUrl: "https://www.youtube.com/results?search_query=plank+proper+form"
            },
            {
                name: "Bird Dogs",
                type: "Core",
                difficulty: "Beginner",
                calsPerSet: 7,
                instructions: "1. Start on hands and knees, hands under shoulders\n2. Keep back flat and core engaged\n3. Extend right arm forward and left leg back simultaneously\n4. Arm and leg parallel to floor\n5. Hold 3 seconds, return, switch sides",
                keyPoints: "Don't rotate hips or shoulders - stay square. Focus on balance and stability. Excellent for back issues. Move slowly with control.",
                alternatives: "Single arm or leg only version",
                videoUrl: "https://www.youtube.com/results?search_query=bird+dog+exercise"
            },
            {
                name: "Bicep Curls",
                type: "Upper Body",
                difficulty: "Beginner",
                calsPerSet: 8,
                instructions: "1. Stand feet hip-width apart, dumbbell in each hand\n2. Arms hanging straight, palms facing forward\n3. Keep elbows locked at sides (they don't move)\n4. Curl dumbbells up: 3 seconds up, 1 second squeeze at top\n5. Lower slowly: 3 seconds down",
                keyPoints: "NO SWINGING. If you need to swing, weight is too heavy. Only forearms move - upper arms stay still. At top, rotate wrists slightly (pinky up) for extra contraction.",
                alternatives: "Resistance band curls, Hammer curls",
                videoUrl: "https://www.youtube.com/results?search_query=bicep+curls+proper+form"
            },
            {
                name: "Tricep Extensions",
                type: "Upper Body",
                difficulty: "Beginner",
                calsPerSet: 8,
                instructions: "1. Hold one dumbbell with both hands\n2. Raise overhead, elbows pointing forward and up\n3. Lower dumbbell behind head by bending elbows\n4. Go as low as comfortable (feel stretch in triceps)\n5. Extend arms back to start, squeeze triceps",
                keyPoints: "Keep elbows close to head - don't let them flare out wide. Only forearms move. Upper arms stay pointing up throughout. Control the descent.",
                alternatives: "Tricep dips, Close-grip push-ups",
                videoUrl: "https://www.youtube.com/results?search_query=overhead+tricep+extension"
            },
            {
                name: "Front Raises",
                type: "Upper Body",
                difficulty: "Intermediate",
                calsPerSet: 9,
                instructions: "1. Stand feet hip-width, dumbbell in each hand\n2. Arms hanging in front of thighs, slight bend in elbows\n3. Engage core (this helps!)\n4. Raise both arms forward to shoulder height\n5. Lower slowly over 3-4 seconds",
                keyPoints: "Stop at shoulder height - higher risks injury. Keep slight bend in elbows. Don't arch your back. The SLOW LOWERING builds the most strength.",
                alternatives: "Resistance band front raises, Alternating front raises",
                videoUrl: "https://www.youtube.com/results?search_query=dumbbell+front+raises"
            },
            {
                name: "Bent-Over Rows",
                type: "Upper Body",
                difficulty: "Intermediate",
                calsPerSet: 10,
                instructions: "1. Stand feet hip-width, slight bend in knees\n2. Hinge forward at hips until torso is 45 degrees\n3. Let arms hang straight down, dumbbell in each hand\n4. Pull dumbbells up to sides of ribcage, squeeze shoulder blades\n5. Lower with control",
                keyPoints: "Keep back flat throughout - don't round it. Pull with your back muscles, not just arms. Think 'squeeze shoulder blades together.' Builds back width and improves posture.",
                alternatives: "Single-arm rows, Resistance band rows",
                videoUrl: "https://www.youtube.com/results?search_query=bent+over+dumbbell+rows"
            },
            {
                name: "Goblet Squats",
                type: "Lower Body",
                difficulty: "Beginner",
                calsPerSet: 12,
                instructions: "1. Hold both dumbbells at chest height, elbows down\n2. Feet slightly wider than hip-width, toes slightly out\n3. Lower down as if sitting in chair, keeping chest up\n4. Go as deep as comfortable (aim for thighs parallel to floor)\n5. Drive through heels to stand back up",
                keyPoints: "Weight in heels (wiggle toes at bottom). Knees track over toes, don't cave inward. Keep chest proud. If knees hurt, don't go as deep. Builds legs AND core strength.",
                alternatives: "Bodyweight squats, Wall sits",
                videoUrl: "https://www.youtube.com/results?search_query=goblet+squat+form"
            },
            {
                name: "Step-Ups",
                type: "Lower Body",
                difficulty: "Beginner",
                calsPerSet: 10,
                instructions: "1. Place right foot on jump box (lowest height)\n2. Hold dumbbell in each hand at sides\n3. Push through right heel to step up (don't push with back leg)\n4. Bring left foot up to meet right on box\n5. Step back down with left, then right\n6. Complete all reps on right leg, then switch",
                keyPoints: "ALL the work done by the leg on the box. Don't push off with bottom leg. Excellent for glutes and protects your back. Progress to higher box height when comfortable.",
                alternatives: "Box step-ups without weight, Lunges",
                videoUrl: "https://www.youtube.com/results?search_query=box+step+ups+proper+form"
            }
        ];

        // Meal Library Data
        const meals = [
            // YOUR CUSTOM MEALS
            {
                name: "Overnight Oats Special",
                type: "Breakfast",
                protein: 28,
                calories: 420,
                prepTime: 5,
                ingredients: "40g rolled oats\n150g natural yogurt\n25g granola\nHandful raspberries and blackberries\n1 tbsp mixed seeds",
                instructions: "1. Night before: Mix oats with yogurt in container\n2. Refrigerate overnight\n3. Morning: Top with granola, berries, and seeds\n4. Optional: Add honey drizzle"
            },
            {
                name: "Burnt Aubergine Chilli",
                type: "Dinner",
                protein: 38,
                calories: 680,
                prepTime: 45,
                ingredients: "2 aubergines, halved\n2 tins mixed beans\n1 tin chopped tomatoes\nOnion, garlic, peppers\nChilli spices, cumin, paprika\n80g rice or small tortilla\n50g cheese, Greek yogurt",
                instructions: "1. Char aubergines under grill until blackened\n2. Scoop out flesh, chop roughly\n3. Sauté onion, garlic, peppers\n4. Add beans, tomatoes, spices, aubergine\n5. Simmer 30 mins\n6. Serve with rice, top with cheese and yogurt"
            },
            {
                name: "Roasted Vegetable Pizza (Half)",
                type: "Dinner",
                protein: 32,
                calories: 650,
                prepTime: 25,
                ingredients: "Half pizza base\nTomato sauce\nMozzarella cheese\nRoasted peppers, courgette, aubergine\nRed onion\nFresh basil\nSide salad",
                instructions: "1. Roast vegetables at 200°C for 15 mins\n2. Spread sauce on half pizza base\n3. Add cheese and roasted veg\n4. Bake at 220°C for 12-15 mins\n5. Top with fresh basil\n6. Serve with large side salad"
            },
            {
                name: "Napolitano 5 Bean Salad with Mackerel",
                type: "Lunch",
                protein: 42,
                calories: 560,
                prepTime: 10,
                ingredients: "1 tin 5 bean salad (Napolitano style)\n150g smoked mackerel, flaked\n2 boiled eggs, halved\nMixed salad leaves\nCherry tomatoes\nCucumber\nLemon & olive oil dressing",
                instructions: "1. Drain bean salad\n2. Arrange on bed of mixed leaves\n3. Top with flaked mackerel and eggs\n4. Add tomatoes and cucumber\n5. Drizzle with lemon and olive oil\n6. Season with black pepper"
            },
            {
                name: "Mackerel Pate & Crudités",
                type: "Lunch",
                protein: 38,
                calories: 520,
                prepTime: 15,
                ingredients: "150g smoked mackerel\n100g cream cheese\n2 tbsp Greek yogurt\nLemon juice, horseradish\nCarrot, cucumber, celery sticks\nBell pepper strips\n2 wholemeal crackers",
                instructions: "1. Blend mackerel, cream cheese, yogurt until smooth\n2. Add lemon juice and horseradish to taste\n3. Refrigerate 10 mins\n4. Prep vegetable crudités\n5. Serve pate with vegetables and crackers"
            },
            {
                name: "Frittata with Potato, Asparagus, Peas, Feta & Mint",
                type: "Dinner",
                protein: 36,
                calories: 580,
                prepTime: 35,
                ingredients: "6 eggs\n200g new potatoes, sliced thin\n150g asparagus\n100g peas\n80g feta cheese\nFresh mint\nOnion, garlic\nSide salad",
                instructions: "1. Boil potatoes for 5 mins, drain\n2. Sauté onion, add potatoes, asparagus, peas\n3. Beat eggs, add crumbled feta and mint\n4. Pour over vegetables in oven-proof pan\n5. Cook on hob 5 mins, finish under grill\n6. Serve with large side salad"
            },
            {
                name: "Teriyaki Salmon with Broccoli & Brown Rice",
                type: "Dinner",
                protein: 44,
                calories: 640,
                prepTime: 25,
                ingredients: "180g salmon fillet\nTeriyaki sauce\n200g tender stem broccoli\n80g brown basmati rice\nSesame seeds\nSpring onions",
                instructions: "1. Cook brown rice according to package\n2. Marinate salmon in teriyaki 10 mins\n3. Grill salmon 12-15 mins, brushing with sauce\n4. Steam broccoli 5-6 mins\n5. Serve salmon on rice with broccoli\n6. Sprinkle with sesame seeds and spring onions"
            },
            
            // ORIGINAL 15 MEALS FROM MEAL CARDS
            {
                name: "Power Protein Smoothie",
                type: "Breakfast",
                protein: 35,
                calories: 380,
                prepTime: 5,
                ingredients: "30g vegan protein powder\n150g Greek yogurt\nHandful spinach\n100g frozen berries\n1 tbsp peanut butter\n250ml water or almond milk",
                instructions: "1. Add all ingredients to blender\n2. Blend until smooth\n3. Add more liquid if too thick\n4. Pour into glass or travel cup\n5. Drink immediately for best nutrition"
            },
            {
                name: "Veggie Protein Scramble",
                type: "Breakfast",
                protein: 32,
                calories: 390,
                prepTime: 8,
                ingredients: "3 large eggs\nLarge handful spinach\n100g mushrooms, sliced\n5 cherry tomatoes, halved\n1 slice wholemeal toast\nSplash of milk",
                instructions: "1. Cook mushrooms in pan until golden\n2. Add spinach and tomatoes, cook until wilted\n3. Scramble eggs with milk separately\n4. Combine eggs with vegetables\n5. Serve with wholemeal toast"
            },
            {
                name: "Greek Yogurt Power Bowl",
                type: "Breakfast",
                protein: 28,
                calories: 420,
                prepTime: 3,
                ingredients: "200g full-fat Greek yogurt\n25g granola\n100g mixed berries\n1 tbsp mixed seeds\n1 tbsp honey\nOptional: 15g protein powder",
                instructions: "1. Place Greek yogurt in bowl\n2. Mix in protein powder if using\n3. Top with granola and berries\n4. Sprinkle with seeds\n5. Drizzle with honey"
            },
            {
                name: "Cottage Cheese Toast Stack",
                type: "Breakfast",
                protein: 33,
                calories: 360,
                prepTime: 5,
                ingredients: "2 slices wholemeal toast\n150g cottage cheese\n1 large tomato, sliced\nBlack pepper & herbs\n1 boiled egg\nOptional: half avocado",
                instructions: "1. Toast bread until golden\n2. Spread cottage cheese thickly on toast\n3. Layer with sliced tomatoes\n4. Season generously with pepper and herbs\n5. Serve with boiled egg on side"
            },
            {
                name: "Protein-Packed Porridge",
                type: "Breakfast",
                protein: 30,
                calories: 400,
                prepTime: 6,
                ingredients: "40g rolled oats\n150g Greek yogurt\n15g protein powder (vanilla)\n1 tbsp peanut butter\nBerries to top\nWater or milk for cooking",
                instructions: "1. Cook oats with water or milk as usual\n2. Remove from heat when cooked\n3. Stir in protein powder and Greek yogurt\n4. Add peanut butter and mix\n5. Top with fresh berries"
            },
            {
                name: "Mediterranean Chickpea Bowl",
                type: "Lunch",
                protein: 38,
                calories: 580,
                prepTime: 10,
                ingredients: "200g chickpeas, drained\n2 boiled eggs, quartered\n50g feta cheese\nMixed salad leaves\nCherry tomatoes, cucumber, red onion\n2 tbsp hummus\n1 tbsp olive oil dressing\nWholemeal pitta",
                instructions: "1. Arrange salad leaves in bowl\n2. Add chickpeas, chopped vegetables\n3. Top with eggs and crumbled feta\n4. Add hummus on side\n5. Drizzle with olive oil dressing\n6. Serve with pitta bread"
            },
            {
                name: "Tuna Power Wrap",
                type: "Lunch",
                protein: 42,
                calories: 520,
                prepTime: 5,
                ingredients: "1 tin tuna in spring water\n2 tbsp cottage cheese\nLarge wholemeal wrap\nSpinach leaves\nGrated carrot\nSliced peppers\nSqueeze of lemon\nSide salad",
                instructions: "1. Drain tuna and mix with cottage cheese\n2. Lay wrap flat, add spinach\n3. Spread tuna mixture down center\n4. Add carrot and peppers\n5. Squeeze lemon over filling\n6. Roll tightly, cut diagonally\n7. Serve with side salad"
            },
            {
                name: "Egg & Bean Protein Box",
                type: "Lunch",
                protein: 40,
                calories: 550,
                prepTime: 8,
                ingredients: "3 boiled eggs, sliced\n150g mixed beans\n50g cheese cubes\nCherry tomatoes\nCucumber sticks\n2 tbsp hummus\nHandful mixed nuts\n2 wholemeal crackers",
                instructions: "1. Boil eggs in advance\n2. Arrange all ingredients in container\n3. Pack hummus separately for dipping\n4. This 'bento box' needs no heating\n5. Perfect for eating at desk"
            },
            {
                name: "Quinoa Power Salad",
                type: "Lunch",
                protein: 36,
                calories: 570,
                prepTime: 15,
                ingredients: "150g cooked quinoa\n150g chickpeas\n100g halloumi, grilled\nRoasted peppers, courgette\nSpinach & rocket\n2 tbsp pumpkin seeds\nLemon tahini dressing",
                instructions: "1. Cook quinoa if not pre-cooked\n2. Grill halloumi slices until golden\n3. Arrange quinoa as base\n4. Add chickpeas and roasted veg\n5. Top with halloumi and greens\n6. Sprinkle with pumpkin seeds\n7. Drizzle with dressing"
            },
            {
                name: "Smoked Mackerel Superfood Bowl",
                type: "Lunch",
                protein: 41,
                calories: 560,
                prepTime: 7,
                ingredients: "150g smoked mackerel, flaked\n2 boiled eggs, halved\n100g edamame beans\nMixed salad leaves\nBeetroot slices\n1 tbsp seeds\nHorseradish yogurt dressing\n1 slice rye bread",
                instructions: "1. Flake mackerel into large pieces\n2. Arrange on bed of mixed leaves\n3. Add edamame and beetroot\n4. Top with halved eggs\n5. Make dressing: mix yogurt with horseradish\n6. Drizzle over salad\n7. Serve with rye bread"
            },
            {
                name: "Enhanced Fish & Chips",
                type: "Dinner",
                protein: 38,
                calories: 650,
                prepTime: 25,
                ingredients: "1.5 breaded fish fillets\nReduced portion chips\n150g mushy peas\nSide salad with olive oil\nLemon wedge",
                instructions: "1. Cook fish and chips as usual\n2. Reduce chip portion by 1/3\n3. Heat mushy peas\n4. Prepare large side salad\n5. The extra half fillet adds significant protein\n6. Mushy peas are protein powerhouse"
            },
            {
                name: "Super Protein Puttanesca",
                type: "Dinner",
                protein: 42,
                calories: 680,
                prepTime: 30,
                ingredients: "Puttanesca sauce ingredients\nFull tin cannellini beans\n100g halloumi, cubed\n80g pasta (reduced from 100g)\nLarge side salad\nParmesan cheese",
                instructions: "1. Make puttanesca sauce as per recipe\n2. Drain and rinse cannellini beans, add to sauce\n3. Grill halloumi cubes separately\n4. Cook pasta (slightly less than usual)\n5. Combine sauce with pasta\n6. Top with grilled halloumi\n7. Serve with large side salad"
            },
            {
                name: "Loaded Jacket Potato",
                type: "Dinner",
                protein: 40,
                calories: 620,
                prepTime: 60,
                ingredients: "Large jacket potato\nOption A: 200g cottage cheese + 100g tuna + sweetcorn\nOption B: 150g cheese + baked beans\nOption C: 150g chickpeas + 100g cheese + chilli\nLarge side salad\nSpring onions",
                instructions: "1. Microwave potato 8 mins, then oven 15 mins for crispy skin\n2. Choose your protein topping option\n3. Split potato, add generous filling\n4. Top with spring onions\n5. Serve with large side salad\n6. Cottage cheese + tuna is surprisingly delicious!"
            },
            {
                name: "Omega-3 Fish Feast",
                type: "Dinner",
                protein: 42,
                calories: 640,
                prepTime: 25,
                ingredients: "180g salmon/mackerel/cod fillet\n150g cooked lentils\nRoasted vegetables: courgette, peppers, aubergine\n100g new potatoes\nLemon & herb seasoning\nOlive oil",
                instructions: "1. Season fish with lemon and herbs\n2. Roast vegetables and fish together in one tray\n3. Cook lentils (or use pre-cooked)\n4. Boil small portion of new potatoes\n5. The lentils are the secret weapon for protein\n6. Everything roasts together for easy cleanup"
            },
            {
                name: "Vegetarian Chilli Bowl",
                type: "Dinner",
                protein: 38,
                calories: 700,
                prepTime: 35,
                ingredients: "2 tins mixed beans\n1 tin chopped tomatoes\n150g Quorn mince (optional)\nOnion, garlic, peppers\nChilli spices, cumin, paprika\n80g rice OR small tortilla\n50g cheese, Greek yogurt, coriander",
                instructions: "1. Sauté onion, garlic, peppers\n2. Add beans, tomatoes, Quorn if using\n3. Add spices and simmer 25 mins\n4. Cook rice or warm tortilla\n5. Serve chilli with chosen base\n6. Top with cheese, yogurt, coriander\n7. Make double batch - freezes brilliantly!"
            },
            {
                name: "Greek Yogurt & Berries",
                type: "Snack",
                protein: 18,
                calories: 200,
                prepTime: 1,
                ingredients: "150g Greek yogurt\nHandful mixed berries",
                instructions: "1. Spoon yogurt into bowl\n2. Top with fresh berries\n3. This is your munchies killer at 3:30pm!"
            },
            {
                name: "Pre-Portioned Nut Mix",
                type: "Snack",
                protein: 9,
                calories: 240,
                prepTime: 0,
                ingredients: "40g mixed nuts (almonds, cashews, walnuts)\n1 apple or banana",
                instructions: "1. Every Sunday, portion 40g into 7 bags\n2. Keep in desk drawer\n3. Pair with piece of fruit\n4. When bag is empty, you're done for the day"
            },
            {
                name: "Boiled Egg Power Duo",
                type: "Snack",
                protein: 14,
                calories: 160,
                prepTime: 0,
                ingredients: "2 boiled eggs\nCarrot & cucumber sticks\nCherry tomatoes\nSalt & pepper",
                instructions: "1. Boil 14 eggs every Sunday\n2. Store in fridge all week\n3. Grab 2 when needed\n4. Add veggie sticks\n5. Cheap, filling, perfect protein snack"
            },
            {
                name: "Protein Bar & Fruit",
                type: "Snack",
                protein: 17,
                calories: 270,
                prepTime: 0,
                ingredients: "1 protein bar (15g+ protein)\n1 banana or apple",
                instructions: "1. Keep 5 bars in desk drawer\n2. Pair with fresh fruit\n3. Look for bars with 15g+ protein, <15g sugar\n4. Good brands: Grenade, PhD Smart Bar, Trek"
            },
            {
                name: "Hummus & Veggie Plate",
                type: "Snack",
                protein: 11,
                calories: 200,
                prepTime: 3,
                ingredients: "100g hummus\nCarrot sticks\nCucumber sticks\nPepper strips\n2 wholemeal crackers",
                instructions: "1. Prep veggie sticks Sunday night in water\n2. Store in containers - stays crispy all week\n3. Serve hummus with veggies and crackers\n4. The crunch factor satisfies snack cravings!"
            }
        ];

        // Populate exercises
        function filterExercises() {
            const filter = document.getElementById('exerciseFilter').value;
            const grid = document.getElementById('exerciseGrid');
            grid.innerHTML = '';
            
            exercises.filter(ex => filter === 'all' || ex.type.toLowerCase().includes(filter)).forEach(exercise => {
                const card = document.createElement('div');
                card.className = 'exercise-card';
                card.onclick = () => showExerciseDetail(exercise);
                card.innerHTML = `
                    <h3>${exercise.name}</h3>
                    <div class="exercise-stats">
                        <div class="stat-badge">${exercise.type}</div>
                        <div class="stat-badge">${exercise.difficulty}</div>
                        <div class="stat-badge">~${exercise.calsPerSet} cal/set</div>
                    </div>
                    <p style="margin-top: 10px; opacity: 0.8; font-size: 0.9em;">Click for detailed instructions</p>
                `;
                grid.appendChild(card);
            });
        }

        // Populate meals
        function filterMeals() {
            const filter = document.getElementById('mealFilter').value;
            const grid = document.getElementById('mealGrid');
            grid.innerHTML = '';
            
            meals.filter(meal => filter === 'all' || meal.type.toLowerCase() === filter).forEach(meal => {
                const card = document.createElement('div');
                card.className = 'meal-card';
                card.onclick = () => showMealDetail(meal);
                card.innerHTML = `
                    <h3>${meal.name}</h3>
                    <div class="meal-stats">
                        <div class="stat-badge">🍖 ${meal.protein}g</div>
                        <div class="stat-badge">🔥 ${meal.calories} cal</div>
                        <div class="stat-badge">⏱️ ${meal.prepTime} mins</div>
                    </div>
                    <p style="margin-top: 10px; opacity: 0.8; font-size: 0.9em;">Click for full recipe</p>
                `;
                grid.appendChild(card);
            });
        }

        // Initialize
        filterExercises();
        filterMeals();

        // Day selection and schedule
        function selectDay(day) {
            document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const schedules = {
                thursday: {
                    morning: "Upper Body Strength - Bicep Curls, Tricep Extensions, Front Raises, Bent-Over Rows",
                    lunch: "15-min desk break walk",
                    evening: "Weigh-In Day! Rest evening or light walk"
                },
                friday: {
                    morning: "Core Focus - Modified Glute Bridges, Dead Bugs, Plank Hold, Bird Dogs",
                    lunch: "15-min walk/run",
                    evening: "Rest evening, meal prep for weekend"
                },
                saturday: {
                    morning: "Extended Session (20-25 mins) - Full body workout with goblet squats, step-ups, all upper body exercises, core finisher",
                    lunch: "Gardening / active recovery",
                    evening: "Enjoy dinner, rest"
                },
                sunday: {
                    morning: "Tai Chi app (15 mins)",
                    lunch: "Optional gentle walk, meal prep for week",
                    evening: "Plan next week, foam rolling"
                },
                monday: {
                    morning: "Core Focus - Modified Glute Bridges, Dead Bugs, Plank Hold, Bird Dogs",
                    lunch: "15-min walk/run",
                    evening: "Tennis (19:00), Post-tennis stretch"
                },
                tuesday: {
                    morning: "Upper Body Strength - Bicep Curls, Tricep Extensions, Front Raises, Bent-Over Rows",
                    lunch: "Desk breaks taken",
                    evening: "Football (19:00), Post-football stretch"
                },
                wednesday: {
                    morning: "Tai Chi app (15 mins)",
                    lunch: "Desk breaks, 3:30pm protein snack",
                    evening: "Evening stretching - hip flexors, piriformis"
                }
            };
            
            const schedule = schedules[day];
            document.getElementById('dayContent').innerHTML = `
                <div class="card">
                    <h2>🌅 Morning (6:00-6:10am)</h2>
                    <div class="activity-section">
                        <p>${schedule.morning}</p>
                        <div class="checkbox-item">
                            <input type="checkbox" id="${day}-morning">
                            <label>Mark morning session complete</label>
                        </div>
                    </div>

                    <h2>🌞 Lunch (12:30pm)</h2>
                    <div class="activity-section">
                        <p>${schedule.lunch}</p>
                        <div class="checkbox-item">
                            <input type="checkbox" id="${day}-lunch">
                            <label>Mark lunch activity complete</label>
                        </div>
                    </div>

                    <h2>🌙 Evening</h2>
                    <div class="activity-section">
                        <p>${schedule.evening}</p>
                        <div class="checkbox-item">
                            <input type="checkbox" id="${day}-evening">
                            <label>Mark evening activity complete</label>
                        </div>
                    </div>
                </div>
            `;
            loadDayCheckboxes(day);
        }

        // Local Storage Functions
        function saveQuickLog() {
            const log = {
                date: document.getElementById('quickDate').value,
                weight: document.getElementById('quickWeight').value,
                caloriesIn: document.getElementById('quickCalIn').value,
                caloriesOut: document.getElementById('quickCalOut').value,
                protein: document.getElementById('quickProtein').value,
                water: document.getElementById('quickWater').value,
                pain: document.getElementById('quickPain').value
            };

            let logs = JSON.parse(localStorage.getItem('dailyLogs') || '[]');
            const existingIndex = logs.findIndex(l => l.date === log.date);
            
            if (existingIndex >= 0) {
                logs[existingIndex] = log;
            } else {
                logs.push(log);
            }
            
            localStorage.setItem('dailyLogs', JSON.stringify(logs));
            
            if (log.weight) {
                updateCurrentWeight(log.weight);
            }
            
            alert('✅ Daily log saved!');
        }

        function updateCurrentWeight(weight) {
            document.getElementById('currentWeight').textContent = weight;
            const tolose = weight - 159;
            document.getElementById('tolose').textContent = tolose.toFixed(1);
            
            const totalToLose = 177 - 159;
            const lost = 177 - weight;
            const progress = (lost / totalToLose * 100).toFixed(1);
            document.getElementById('overallProgress').style.width = progress + '%';
            document.getElementById('overallProgress').textContent = progress + '%';
        }

        function saveRun() {
            const run = {
                date: document.getElementById('runDate').value,
                distance: document.getElementById('runDistance').value,
                time: document.getElementById('runTime').value,
                pace: document.getElementById('runPace').value,
                calories: document.getElementById('runCalories').value,
                feeling: document.getElementById('runFeeling').value
            };

            let runs = JSON.parse(localStorage.getItem('runs') || '[]');
            runs.push(run);
            localStorage.setItem('runs', JSON.stringify(runs));
            
            displayRunHistory();
            
            // Clear form
            document.getElementById('runDistance').value = '';
            document.getElementById('runTime').value = '';
            document.getElementById('runPace').value = '';
            document.getElementById('runCalories').value = '';
            
            alert('🏃 Run logged!');
        }

        function displayRunHistory() {
            const runs = JSON.parse(localStorage.getItem('runs') || '[]');
            const history = document.getElementById('runHistory');
            
            if (runs.length === 0) {
                history.innerHTML = '<p style="opacity: 0.6; margin-top: 20px;">No runs logged yet</p>';
                return;
            }
            
            history.innerHTML = '<h3 style="margin-top: 20px;">Recent Runs</h3>' + 
                runs.slice(-10).reverse().map(run => `
                    <div class="card" style="margin-top: 10px;">
                        <strong>${run.date}</strong><br>
                        📏 ${run.distance} km | ⏱️ ${run.time} mins | 🏃 ${run.pace}<br>
                        🔥 ${run.calories} cal | Felt: ${run.feeling}
                    </div>
                `).join('');
        }

        function addWeightEntry() {
            const entry = {
                date: document.getElementById('weightDate').value,
                weight: parseFloat(document.getElementById('weightValue').value)
            };

            if (!entry.date || !entry.weight) {
                alert('Please enter both date and weight');
                return;
            }

            let weights = JSON.parse(localStorage.getItem('weights') || '[]');
            weights.push(entry);
            weights.sort((a, b) => new Date(a.date) - new Date(b.date));
            localStorage.setItem('weights', JSON.stringify(weights));
            
            updateCurrentWeight(entry.weight);
            displayWeightHistory();
            
            document.getElementById('weightValue').value = '';
            alert('⚖️ Weight entry added!');
        }

        function displayWeightHistory() {
            const weights = JSON.parse(localStorage.getItem('weights') || '[]');
            const history = document.getElementById('weightHistory');
            
            if (weights.length === 0) {
                history.innerHTML = '<p style="opacity: 0.6; margin-top: 20px;">No weight entries yet</p>';
                return;
            }
            
            history.innerHTML = '<h3 style="margin-top: 20px;">Weight History</h3>' + 
                weights.slice(-10).reverse().map((entry, index) => {
                    const prev = weights[weights.length - index - 2];
                    const change = prev ? (entry.weight - prev.weight).toFixed(1) : 0;
                    const changeText = change < 0 ? `<span style="color: var(--success)">▼ ${Math.abs(change)} lbs</span>` : 
                                      change > 0 ? `<span style="color: var(--danger)">▲ ${change} lbs</span>` : '';
                    return `
                        <div class="card" style="margin-top: 10px;">
                            <strong>${entry.date}</strong> - ${entry.weight} lbs ${changeText}
                        </div>
                    `;
                }).join('');
        }

        function saveMeasurement() {
            const measurement = {
                date: document.getElementById('measureDate').value,
                waist: document.getElementById('measureWaist').value,
                chest: document.getElementById('measureChest').value,
                arms: document.getElementById('measureArms').value
            };

            let measurements = JSON.parse(localStorage.getItem('measurements') || '[]');
            measurements.push(measurement);
            localStorage.setItem('measurements', JSON.stringify(measurements));
            
            displayMeasurementHistory();
            
            document.getElementById('measureWaist').value = '';
            document.getElementById('measureChest').value = '';
            document.getElementById('measureArms').value = '';
            
            alert('📏 Measurement saved!');
        }

        function displayMeasurementHistory() {
            const measurements = JSON.parse(localStorage.getItem('measurements') || '[]');
            const history = document.getElementById('measurementHistory');
            
            if (measurements.length === 0) {
                history.innerHTML = '<p style="opacity: 0.6; margin-top: 20px;">No measurements yet</p>';
                return;
            }
            
            history.innerHTML = '<h3 style="margin-top: 20px;">Measurement History</h3>' + 
                measurements.slice(-5).reverse().map(m => `
                    <div class="card" style="margin-top: 10px;">
                        <strong>${m.date}</strong><br>
                        Waist: ${m.waist}" | Chest: ${m.chest}" | Arms: ${m.arms}"
                    </div>
                `).join('');
        }

        function saveDayCheckbox(day, period) {
            const checkbox = document.getElementById(`${day}-${period}`);
            let checkboxes = JSON.parse(localStorage.getItem('dayCheckboxes') || '{}');
            if (!checkboxes[day]) checkboxes[day] = {};
            checkboxes[day][period] = checkbox.checked;
            localStorage.setItem('dayCheckboxes', JSON.stringify(checkboxes));
        }

        function loadDayCheckboxes(day) {
            const checkboxes = JSON.parse(localStorage.getItem('dayCheckboxes') || '{}');
            if (checkboxes[day]) {
                ['morning', 'lunch', 'evening'].forEach(period => {
                    const checkbox = document.getElementById(`${day}-${period}`);
                    if (checkbox && checkboxes[day][period]) {
                        checkbox.checked = true;
                    }
                    if (checkbox) {
                        checkbox.addEventListener('change', () => saveDayCheckbox(day, period));
                    }
                });
            }
        }

        function exportData() {
            const data = {
                dailyLogs: JSON.parse(localStorage.getItem('dailyLogs') || '[]'),
                runs: JSON.parse(localStorage.getItem('runs') || '[]'),
                weights: JSON.parse(localStorage.getItem('weights') || '[]'),
                measurements: JSON.parse(localStorage.getItem('measurements') || '[]'),
                dayCheckboxes: JSON.parse(localStorage.getItem('dayCheckboxes') || '{}'),
                exportDate: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fitness-tracker-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('📥 Backup downloaded! Keep this file safe.');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (confirm('This will replace all current data. Are you sure?')) {
                        localStorage.setItem('dailyLogs', JSON.stringify(data.dailyLogs || []));
                        localStorage.setItem('runs', JSON.stringify(data.runs || []));
                        localStorage.setItem('weights', JSON.stringify(data.weights || []));
                        localStorage.setItem('measurements', JSON.stringify(data.measurements || []));
                        localStorage.setItem('dayCheckboxes', JSON.stringify(data.dayCheckboxes || {}));
                        
                        alert('✅ Data imported successfully!');
                        location.reload();
                    }
                } catch (err) {
                    alert('❌ Error importing data. Make sure the file is valid.');
                }
            };
            reader.readAsText(file);
        }

        // Load saved data on page load
        window.addEventListener('load', function() {
            // Load weight history
            const weights = JSON.parse(localStorage.getItem('weights') || '[]');
            if (weights.length > 0) {
                const latest = weights[weights.length - 1];
                updateCurrentWeight(latest.weight);
            }
            
            displayWeightHistory();
            displayRunHistory();
            displayMeasurementHistory();
            
            // Initialize Thursday schedule by default
            selectDay('thursday');
            
            // Load goal checkboxes
            const goals = JSON.parse(localStorage.getItem('weeklyGoals') || '{}');
            ['goal1', 'goal2', 'goal3', 'goal4'].forEach(id => {
                const checkbox = document.getElementById(id);
                if (goals[id]) checkbox.checked = true;
                checkbox.addEventListener('change', function() {
                    goals[id] = this.checked;
                    localStorage.setItem('weeklyGoals', JSON.stringify(goals));
                });
            });

            // Calculate current week
            const startDate = new Date('2025-10-23');
            const today = new Date();
            const diffTime = Math.abs(today - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const currentWeek = Math.min(Math.ceil(diffDays / 7), 24);
            document.getElementById('currentWeek').textContent = currentWeek;
        });

        // Save all checkboxes to localStorage
        document.addEventListener('change', function(e) {
            if (e.target.type === 'checkbox' && !e.target.id.includes('-')) {
                const checkboxes = {};
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    if (cb.id) checkboxes[cb.id] = cb.checked;
                });
                localStorage.setItem('allCheckboxes', JSON.stringify(checkboxes));
            }
        });

        // Load all checkboxes on page load
        window.addEventListener('load', function() {
            const saved = JSON.parse(localStorage.getItem('allCheckboxes') || '{}');
            Object.keys(saved).forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox) checkbox.checked = saved[id];
            });
        });
    </script>
</body>
</html>